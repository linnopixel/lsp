<!doctypehtml><html lang=id><meta charset=UTF-8><meta content="width=device-width,initial-scale=1"name=viewport><title>Bind9 DNS Generator</title><script src=b.js></script><link href=icon.svg rel=icon type=image/x-icon><style>:root{--bg:#030712;--card:#111827;--primary:#6366f1;--primary-hover:#818cf8;--text-main:#f3f4f6;--text-muted:#9ca3af;--border:rgba(255, 255, 255, 0.1);--code-bg:#000000}*{box-sizing:border-box;margin:0;padding:0}body{background-color:var(--bg);color:var(--text-main);font-family:system-ui,-apple-system,sans-serif;line-height:1.5;display:flex;justify-content:center;padding:20px}.container{width:100%;max-width:800px;margin-top:2rem}header{text-align:center;margin-bottom:2.5rem}header h1{font-size:1.8rem;font-weight:800;letter-spacing:-.025em}header span{color:var(--primary)}.card{background:var(--card);border:1px solid var(--border);border-radius:1.5rem;padding:2rem;box-shadow:0 10px 15px -3px rgba(0,0,0,.1)}.grid{display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1.5rem}@media (max-width:640px){.grid{grid-template-columns:1fr}}label{display:block;font-size:.7rem;font-weight:700;text-transform:uppercase;letter-spacing:.05em;color:var(--text-muted);margin-bottom:.5rem}input{width:100%;background:rgba(0,0,0,.3);border:1px solid var(--border);border-radius:.75rem;padding:.75rem 1rem;color:#fff;font-size:1rem;transition:border .2s}input:focus{outline:0;border-color:var(--primary)}button.btn-primary{width:100%;background:var(--primary);color:#fff;border:none;padding:1rem;border-radius:.75rem;font-weight:700;cursor:pointer;transition:background .2s}button.btn-primary:hover{background:var(--primary-hover)}.tabs{display:flex;background:rgba(0,0,0,.2);padding:.4rem;border-radius:1rem;border:1px solid var(--border);margin-top:2rem;gap:.4rem}.tab-btn{flex:1;padding:.75rem;border-radius:.7rem;background:0 0;border:none;color:var(--text-muted);font-weight:700;font-size:.75rem;cursor:pointer}.tab-btn.active{background:var(--primary);color:#fff}#res{margin-top:1.5rem;display:none}.hidden{display:none}.code-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem;padding:0 .5rem}.copy-btn{color:var(--primary-hover);background:0 0;border:none;font-size:.7rem;font-weight:700;cursor:pointer;text-transform:uppercase}pre{background:var(--code-bg);color:#a5f3fc;padding:1.25rem;border-radius:1rem;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:.85rem;overflow-x:auto;border:1px solid rgba(255,255,255,.05);line-height:1.6}.custom-alert{position:fixed;bottom:2rem;left:50%;transform:translateX(-50%);background:var(--primary);color:#fff;padding:.75rem 1.5rem;border-radius:2rem;font-size:.875rem;font-weight:600;display:none;box-shadow:0 10px 15px -3px rgba(0,0,0,.3);z-index:1000}</style><div class=custom-alert id=copyAlert>Berhasil disalin!</div><div class=container><header><h1>Bind9 <span>DNS</span> Generator</h1></header><div class=card><div class=grid><div><label>Nama Domain</label> <input id=domain placeholder=example.com value=michellino.tyz.pro></div><div><label>IP Address Server</label> <input id=ip placeholder=192.168.1.1 value=10.119.181.165></div></div><button class=btn-primary onclick=generate()>Generate Konfigurasi</button></div><div id=res><div class=tabs><button class="tab-btn active"onclick='tab("i")'id=t1>01. INSTALL</button> <button class=tab-btn onclick='tab("c")'id=t2>02. CONFIGURE</button></div><div id=si style=margin-top:1.5rem><div class=code-header><label>Script Instalasi</label> <button class=copy-btn onclick='cp("oi")'>Salin Kode</button></div><pre id=oi></pre></div><div class=hidden id=sc style=margin-top:1.5rem><div class=code-header><label>Konfigurasi File Zona</label> <button class=copy-btn onclick='cp("oc")'>Salin Kode</button></div><pre id=oc></pre></div></div></div><script>const $ = id => document.getElementById(id);
        function tab(t){
            const i = t === 'i';
            $('t1').className = i ? 'tab-btn active' : 'tab-btn';
            $('t2').className = !i ? 'tab-btn active' : 'tab-btn';
            $('si').classList.toggle('hidden', !i);
            $('sc').classList.toggle('hidden', i);
        }

        const pad = (text, length) => {
            const str = String(text);
            return str + ' '.repeat(Math.max(1, length - str.length));
        };

        function generate(){
            const d = $('domain').value, ip = $('ip').value;
            if(!d || !ip) return;
            
            const p = ip.split('.');
            if(p.length !== 4) return;

            const rv = `${p[2]}.${p[1]}.${p[0]}.in-addr.arpa`, df = d.split('.')[0];
            const s = new Date().toISOString().slice(0,10).replace(/-/g,'') + '01';
            
            $('oi').textContent = `apt update && apt install bind9 dnsutils -y`;
            
            const valWidth = 12; 

            const zoneContent = (isRev = false) => `;
; BIND ${isRev ? 'Reverse ' : ''}Data file for ${d}
;
$TTL    604800
@       IN      SOA     ${d}. root.${d}. (
                        ${pad(s, valWidth)}; Serial
                        ${pad('604800', valWidth)}; Refresh
                        ${pad('86400', valWidth)}; Retry
                        ${pad('2419200', valWidth)}; Expire
                        ${pad('604800 )', valWidth)}; Negative Cache TTL
;
@       IN      NS      ${d}.
${isRev ? pad(p[3], 8) : pad('@', 8)}IN      ${isRev ? 'PTR     ' + d + '.' : 'A       ' + ip}
${isRev ? '' : pad('www', 8) + 'IN      A       ' + ip}
EOF`;

            $('oc').textContent = `cat <<EOF > /etc/bind/named.conf.local
zone "${d}" {
    type master;
    file "/etc/bind/db.${df}";
};

zone "${rv}" {
    type master;
    file "/etc/bind/db.rev";
};
EOF

cat <<EOF > /etc/bind/db.${df}
${zoneContent(false)}

cat <<EOF > /etc/bind/db.rev
${zoneContent(true)}

echo "nameserver ${ip}" > /etc/resolv.conf
systemctl restart bind9
nslookup ${d}`;
            
            $('res').style.display = 'block';
        }

        function cp(id){
            const text = $(id).textContent;
            const textArea = document.createElement('textarea');
            textArea.value = text;
            document.body.appendChild(textArea);
            textArea.select();
            try {
                document.execCommand('copy');
                const alert = $('copyAlert');
                alert.style.display = 'block';
                setTimeout(() => { alert.style.display = 'none'; }, 2000);
            } catch (err) {
                console.error('Gagal menyalin', err);
            }
            document.body.removeChild(textArea);
        }</script>
