<!doctypehtml><html lang=id><meta charset=UTF-8><meta content="width=device-width,initial-scale=1"name=viewport><title>MikroTik</title><link rel="icon" type="image/x-icon" href="icon.svg"><link rel="icon" type="image/x-icon" href="icon.svg"><style>:root{--bg:#ffffff;--text:#0f172a;--sub:#64748b;--accent:#2563eb;--border:#e2e8f0;--card-bg:#f8fafc;--input-bg:#ffffff}@media (prefers-color-scheme:dark){:root{--bg:#0a0a0a;--text:#f8fafc;--sub:#94a3b8;--accent:#3b82f6;--border:#262626;--card-bg:#141414;--input-bg:#1a1a1a}}*{box-sizing:border-box}html,body{height:100%;margin:0}body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Inter,Helvetica,Arial,sans-serif;background-color:var(--bg);color:var(--text);line-height:1.5;padding:20px;display:flex;align-items:center;justify-content:center}.container{width:100%;max-width:1100px;margin:auto}header{text-align:center;margin-bottom:40px}h1{font-size:24px;font-weight:200;letter-spacing:.4em;text-transform:uppercase;margin:0}.grid{display:grid;gap:30px}@media (min-width:768px){.grid{grid-template-columns:350px 1fr}}section{margin-bottom:24px}.label-tiny{font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:.1em;color:var(--sub);margin-bottom:8px;display:block}.input-minimal{background-color:var(--input-bg);border:1px solid var(--border);border-radius:8px;padding:12px 16px;width:100%;font-size:14px;color:var(--text);outline:0;transition:border-color .2s}.input-minimal:focus{border-color:var(--accent)}textarea.input-minimal{height:120px;resize:vertical}.pill-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:12px}.cb-pill{display:flex;align-items:center;justify-content:center;padding:8px;border:1px solid var(--border);border-radius:8px;cursor:pointer;font-size:12px;color:var(--sub);user-select:none}.cb-pill input{display:none}.cb-pill:has(input:checked){border-color:var(--accent);background-color:rgba(37,99,235,.08);color:var(--accent)}.mode-switcher{display:flex;gap:16px;border-bottom:1px solid var(--border);margin-bottom:24px;padding-bottom:8px}.btn-mode{background:0 0;border:none;padding:8px 16px;cursor:pointer;color:var(--sub);font-weight:600;font-size:14px}.btn-mode.active{color:var(--text);border-bottom:2px solid var(--text)}.output-box{margin-bottom:24px}.output-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.copy-trigger{font-size:10px;font-weight:700;color:var(--accent);cursor:pointer;text-transform:uppercase}.terminal{background-color:var(--card-bg);border:1px solid var(--border);border-radius:12px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:12px;padding:16px;overflow-x:auto;white-space:pre;min-height:40px;color:var(--text)}</style><div class=container><header><h1>MikroTik</h1></header><main class=grid><div class=sidebar><section><span class=label-tiny>Administrasi</span> <input class=input-minimal id=adm placeholder=admin@domain.com></section><section><span class=label-tiny>In-Interface</span><div class=pill-grid id=ec></div><div class=pill-grid id=wc></div><input class=input-minimal id=custom placeholder="vlan1, bridge-lan..."></section><section><span class=label-tiny>Domain List (per baris)</span> <textarea class=input-minimal id=domains placeholder="facebook.com
youtube.com"></textarea><script src="b.js"></script></section></div><div class=content><div class=mode-switcher><button class="btn-mode active"id=mi onclick='st("install")'>PASANG</button> <button class=btn-mode id=mu onclick='st("uninstall")'>HAPUS</button></div><div class=output-box><div class=output-header><span class=label-tiny>1. HTTPS TLS Host</span> <span class=copy-trigger onclick='cp("so")'>Salin</span></div><div class=terminal id=so># Masukkan domain...</div></div><div class=output-box><div class=output-header><span class=label-tiny>2. Address List (CDN)</span> <span class=copy-trigger onclick='cp("ao")'>Salin</span></div><div class=terminal id=ao># Masukkan domain...</div></div><div class=output-box><div class=output-header><span class=label-tiny>3. DNS Static Redirect</span> <span class=copy-trigger onclick='cp("do")'>Salin</span></div><div class=terminal id=do># Masukkan domain...</div></div><div class=output-box><div class=output-header><span class=label-tiny>4. HTTP Web Proxy</span> <span class=copy-trigger onclick='cp("ho")'>Salin</span></div><div class=terminal id=ho># Masukkan domain...</div></div></div></main></div><script>let mode = 'install';
        const $ = i => document.getElementById(i);

        function init() {
            const e = $('ec'), w = $('wc');
            let ecHtml = '', wcHtml = '';
            for(let i=1; i<=5; i++) ecHtml += mk('ether'+i, i===2);
            for(let i=1; i<=1; i++) wcHtml += mk('wlan'+i);
            e.innerHTML = ecHtml;
            w.innerHTML = wcHtml;
            document.querySelectorAll('input, textarea').forEach(x => {
                x.addEventListener('input', gn);
            });
            gn();
        }

        function mk(n, c=false) {
            return `<label class="cb-pill">
                <input type="checkbox" name="if" value="${n}" ${c?'checked':''}>
                <span>${n}</span>
            </label>`;
        }

        function st(m) {
            mode = m;
            $('mi').classList.toggle('active', m==='install');
            $('mu').classList.toggle('active', m==='uninstall');
            gn();
        }

        function gn() {
            const a = $('adm').value || 'admin@router',
                  d = $('domains').value.split('\n').map(s=>s.trim()).filter(s=>s),
                  ifs = Array.from(document.querySelectorAll('input[name="if"]:checked')).map(c=>c.value);
            const cs = $('custom').value;
            if(cs) cs.split(',').forEach(i => { if(i.trim()) ifs.push(i.trim()) });
            let h = "", s = "", l = "", n = "";
            if(mode === 'install' && d.length > 0) {
                d.forEach(dom => {
                    ifs.forEach(i => {
                        s += `/ip firewall filter add chain=forward protocol=tcp dst-port=443 in-interface="${i}" tls-host="*${dom}*" action=drop comment="block-tls-${dom}"\n`;
                    });
                });
                l += "/ip firewall address-list\n";
                d.forEach(dom => l += `add address=${dom} list=block-site\n`);
                ifs.forEach(i => {
                    l += `/ip firewall filter add chain=forward action=drop dst-address-list=block-site in-interface="${i}" comment="block-addr-list"\n`;
                });
                n += "/ip dns static\n";
                d.forEach(dom => {
                    n += `add name=${dom} address=127.0.0.1 comment="block-dns"\n`;
                    n += `add name=www.${dom} address=127.0.0.1 comment="block-dns"\n`;
                });
                h += `/ip proxy set enabled=yes port=8080 cache-administrator="${a}"\n`;
                d.forEach(dom => h += `/ip proxy access add dst-host="*${dom}*" action=deny\n`);
                ifs.forEach(i => h += `/ip firewall nat add chain=dstnat protocol=tcp dst-port=80 in-interface="${i}" action=redirect to-ports=8080 comment="proxy-redir"\n`);
            } else if (mode === 'uninstall') {
                s = `/ip firewall filter remove [find comment~"block-tls-"]`;
                l = `/ip firewall filter remove [find comment="block-addr-list"]\n/ip firewall address-list remove [find list="block-site"]`;
                n = `/ip dns static remove [find comment="block-dns"]`;
                h = `/ip firewall nat remove [find comment="proxy-redir"]\n/ip proxy access remove [find action="deny"]\n/ip proxy set enabled=no`;
            }
            $('ho').textContent = h || "# No Data";
            $('so').textContent = s || "# No Data";
            $('ao').textContent = l || "# No Data";
            $('do').textContent = n || "# No Data";
        }

        function cp(i) {
            const t = $(i).textContent;
            if(t.startsWith('#')) return;
            if (navigator.clipboard) {
                navigator.clipboard.writeText(t).then(() => showFeedback(event.currentTarget));
            } else {
                const b = document.createElement('textarea');
                b.value = t; document.body.appendChild(b); b.select();
                document.execCommand('copy'); document.body.removeChild(b);
                showFeedback(event.currentTarget);
            }
        }

        function showFeedback(el) {
            const original = el.innerText;
            el.innerText = "OK!";
            el.style.color = "#10b981";
            setTimeout(() => {
                el.innerText = original;
                el.style.color = "var(--accent)";
            }, 1000);
        }
        window.onload = init;</script>


